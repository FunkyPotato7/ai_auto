{% comment %}
  Section: "g-hero"

  Snippets:
  - g-button
  - g-render-image
  - g-horizontal-alignment
  - g-render-stars
{% endcomment %}

{% style %}
  #shopify-section-{{ section.id }} {
    --background-overlay-opacity: {{ section.settings.background_overlay }};
  }

  .background-{{ section.id }} {
    background: {{ section.settings.background_color }};
  }

  .paddings-{{ section.id }} {
    padding-top: {{ section.settings.padding_mob_t }}px;
    padding-bottom: {{ section.settings.padding_mob_b }}px;
  }

  .content-paddings-{{ section.id }} {
    padding: {{ section.settings.content_padding_mob }}px;
  }

  @media screen and (min-width: 768px) {
    .paddings-{{ section.id }} {
      padding-top: {{ section.settings.padding_dsk_t }}px;
      padding-bottom: {{ section.settings.padding_dsk_b }}px;
    }

    .content-paddings-{{ section.id }} {
      padding: {{ section.settings.content_padding_dsk }}px;
    }
  }
{% endstyle %}

{%- liquid
  capture horizontal_position_dsk
    case section.settings.horizontal_position_dsk
      when 'left'
        echo 'md:jc-mr-auto'
      when 'center'
        echo 'md:jc-mx-auto'
      when 'right'
        echo 'md:jc-ml-auto'
    endcase
  endcapture
%}

<div class="background-{{ section.id }} jc-relative">
  {% # Mobile image %}
  {% assign bg_image_mob = section.settings.background_image_mob %}
  {% if bg_image_mob != blank %}
    {% render 'g-render-image',
      class: 'jc-w-full jc-h-full jc-absolute jc-inset-0 jc-object-cover md:jc-hidden',
      img_src: bg_image_mob.url,
      img: bg_image_mob,
      size: '600 1000 1400',
      alt: bg_image_mob.alt,
      loading: 'eager'
    %}
  {% endif %}

  {% # Mobile video %}
  {% assign bg_video_mob = section.settings.background_video_mob %}
  {% if bg_video_mob != blank %}
    {{
      bg_video_mob
      | video_tag:
      autoplay: true,
      loop: true,
      muted: true,
      controls: false,
      class: 'jc-w-full jc-h-full jc-absolute jc-inset-0 jc-object-cover md:jc-hidden'
    }}
  {% endif %}

  {% # Desktop image %}
  {% assign bg_image_dsk = section.settings.background_image_dsk %}
  {% if bg_image_dsk != blank %}
    {% render 'g-render-image',
      class: 'jc-w-full jc-h-full jc-absolute jc-inset-0 jc-object-cover jc-hidden md:jc-block',
      img_src: bg_image_dsk.url,
      img: bg_image_dsk,
      size: '600 1000 1400',
      alt: bg_image_dsk.alt,
      loading: 'eager'
    %}
  {% endif %}

  {% # Desktop video %}
  {% assign bg_video_dsk = section.settings.background_video_dsk %}
  {% if bg_video_dsk != blank %}
    {{
      bg_video_dsk
      | video_tag:
      autoplay: true,
      loop: true,
      muted: true,
      controls: false,
      class: 'jc-w-full jc-h-full jc-absolute jc-inset-0 jc-object-cover jc-hidden md:jc-block'
    }}
  {% endif %}
  
  {% # Ovelay %}
  <div
    class="jc-w-full jc-h-full jc-absolute jc-inset-0 jc-bg-[rgba(0,0,0,calc(var(--background-overlay-opacity)/100))]"
  ></div>
  
  {% # Content %}
  <div class="jc-container jc-relative paddings-{{ section.id }}">
    <div class="content-paddings-{{ section.id }} jc-max-w-[768px] jc-flex jc-flex-col {% render 'g-horizontal-alignment', root: section %} {{ horizontal_position_dsk }} background-{{ section.id }} jc-gap-4">
      {%- if section.settings.tagline != blank -%}
        <span class="jc-uppercase">
          {{- section.settings.tagline -}}
        </span>
      {%- endif -%}

      {%- if section.settings.heading != blank -%}
        <h3 class="jc-font-bold jc-text-2xl jc-leading-8 lg:jc-text-5xl lg:jc-leading-10">
          {{- section.settings.heading -}}
        </h3>
      {%- endif -%}

      {%- if section.settings.description != blank -%}
        <div class="jc-text-lg jc-mt-2 jc-leading-8">
          {{ section.settings.description }}
        </div>
      {%- endif -%}
      <div class="jc-flex jc-flex-col jc-gap-4">
        {%- if section.settings.button_1_text != blank -%}  
          <div class="jc-flex jc-items-center jc-gap-4 {% render 'g-horizontal-alignment', root: section, direction: 'row' %}">
            {% # There we render button based on settings from customizer %}
            {% if section.settings.button_1_style == 'transparent-black-with-arrow' %}
              {% assign icon_button_1 = 'arrow-right' %}
            {% else %}
              {% assign icon_button_1 = '' %}
            {% endif %}
            {% render 'g-button', 
              type: section.settings.button_1_style,
              text: section.settings.button_1_text,
              link: section.settings.button_1_link,
              icon: icon_button_1
            %}
          </div>
        {%- endif -%}
        <div class="jc-flex jc-flex-wrap jc-items-center jc-gap-2 {% render 'g-horizontal-alignment', root: section, direction: 'row' %}">
          {%- # Make sure that global rating star settings are in theme before rendering -%}
          {% render 'g-render-stars', rating: section.settings.reassurence_rating %}
          {% if section.settings.reassurence_sentence != blank %}
            <p>
              {{ section.settings.reassurence_sentence }}
            </p>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Hero section",
  "tag": "section",
  "settings": [
    {
      "type": "header",
      "content": "ðŸ“  Layout (desktop)"
    },
    {
      "type": "range",
      "id": "padding_dsk_t",
      "min": 0,
      "max": 80,
      "step": 4,
      "default": 24,
      "unit": "px",
      "label": "Inner top Padding (desktop)"
    },
    {
      "type": "range",
      "id": "padding_dsk_b",
      "min": 0,
      "max": 80,
      "step": 4,
      "default": 24,
      "unit": "px",
      "label": "Inner bottom Padding (desktop)"
    },
    {
      "type": "range",
      "id": "content_padding_dsk",
      "min": 0,
      "max": 80,
      "step": 4,
      "default": 24,
      "unit": "px",
      "label": "Content Padding (desktop)"
    },
    {
      "type": "text_alignment",
      "id": "horizontal_alignment_dsk",
      "label": "Horizontal align (desktop)",
      "default": "center"
    },
    {
      "type": "select",
      "id": "horizontal_position_dsk",
      "label": "Horizontal position (desktop)",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ],
      "default": "center"
    },
    {
      "type": "header",
      "content": "ðŸ“  Layout (mobile)"
    },
    {
      "type": "range",
      "id": "padding_mob_t",
      "min": 0,
      "max": 80,
      "step": 4,
      "default": 24,
      "unit": "px",
      "label": "Inner top Padding (mobile)"
    },
    {
      "type": "range",
      "id": "padding_mob_b",
      "min": 0,
      "max": 80,
      "step": 4,
      "default": 24,
      "unit": "px",
      "label": "Inner bottom Padding (mobile)"
    },
    {
      "type": "range",
      "id": "content_padding_mob",
      "min": 0,
      "max": 80,
      "step": 4,
      "default": 16,
      "unit": "px",
      "label": "Content Padding (mobile)"
    },
    {
      "type": "text_alignment",
      "id": "horizontal_alignment_mob",
      "label": "Horizontal align (mobile)",
      "default": "center"
    },
    {
      "type": "header",
      "content": "ðŸŽ¨ Design"
    },
    {
      "type": "color_background",
      "id": "background_color",
      "label": "Background color",
      "default": "linear-gradient(#E5E7EB,#E5E7EB)"
    },
    {
      "type": "image_picker",
      "id": "background_image_dsk",
      "label": "Background image (Desktop)"
    },
    {
      "type": "video",
      "id": "background_video_dsk",
      "label": "Background video (Desktop)"
    },
    {
      "type": "image_picker",
      "id": "background_image_mob",
      "label": "Background image (Mobile)"
    },
    {
      "type": "video",
      "id": "background_video_mob",
      "label": "Background video (Mobile)"
    },
    {
      "type": "range",
      "id": "background_overlay",
      "label": "Background overlay",
      "default": 0,
      "min": 0,
      "max": 100,
      "step": 1
    },
    {
      "type": "header",
      "content": "â­ ï¸  Reviews reassurance text"
    },
    {
      "type": "text",
      "id": "reassurence_sentence",
      "label": "Reassurence sentence",
      "default": "More than 1m happy clients"
    },
    {
      "type": "range",
      "id": "reassurence_rating",
      "label": "Reassurence rating",
      "default": 5,
      "min": 0,
      "max": 5,
      "step": 0.5
    },
    {
      "type": "header",
      "content": "Section Header Settings"
    },
    {
      "type": "text",
      "id": "tagline",
      "label": "Heading tag",
      "default": "Tagline"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Heading"
    },
    {
      "type": "richtext",
      "id": "description",
      "label": "Description",
      "default": "<p>Description</p>"
    },
    {
      "type": "header",
      "content": "ðŸ”˜ Buttons settings"
    },
    {
      "type": "text",
      "id": "button_1_text",
      "label": "Text of first button",
      "default": "Button one"
    },
    {
      "type": "select",
      "id": "button_1_style",
      "label": "Select style of first button",
      "options": [
        {
          "value": "black-button",
          "label": "style 1"
        },
        {
          "value": "transparent-black",
          "label": "style 2"
        },
        {
          "value": "transparent-black-with-arrow",
          "label": "style 3"
        }
      ],
      "default": "black-button"
    },
    {
      "type": "url",
      "id": "button_1_link",
      "label": "Add button link"
    }    
  ],
  "presets": [
    {
      "name": "Hero section"
    }
  ]
}
{% endschema %}
